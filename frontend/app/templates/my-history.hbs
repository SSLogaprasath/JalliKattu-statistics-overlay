{{page-title "My Registrations & History"}}

<div class="section-header">
  <h5><i class="bi bi-clock-history"></i> My Registrations &amp; Match History</h5>
</div>

{{!-- ═══════ REGISTERED MATCHES ═══════ --}}
<h6 class="fw-bold mb-3"><i class="bi bi-card-checklist text-primary"></i> My Registrations</h6>

{{#if @model.registrations.length}}
  <div class="card mb-4">
    <div class="card-body p-0 table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Match</th>
            <th>Date</th>
            <th>Location</th>
            <th>Round</th>
            <th>Registration</th>
            <th>Match Status</th>
          </tr>
        </thead>
        <tbody>
          {{#each @model.registrations as |r|}}
            <tr>
              <td class="fw-semibold">{{r.match_name}}</td>
              <td class="text-muted small">{{r.match_date}}</td>
              <td class="small">{{r.location}}{{#if r.area}}, {{r.area}}{{/if}}</td>
              <td><span class="badge bg-secondary">{{r.round_name}}</span></td>
              <td>
                <span class="badge {{if (eq r.registration_status 'approved') 'bg-success' (if (eq r.registration_status 'disqualified') 'bg-danger' 'bg-warning text-dark')}}">
                  {{r.registration_status}}
                </span>
              </td>
              <td>
                <span class="status-badge {{if (eq r.match_status 'Completed') 'completed' (if (eq r.match_status 'Live') 'live' 'scheduled')}}">
                  {{r.match_status}}
                </span>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
{{else}}
  <div class="empty-state py-4 mb-4">
    <i class="bi bi-card-checklist" style="font-size:2.5rem;"></i>
    <h6 class="mt-2">No Registrations</h6>
    <p class="text-muted small">You haven't registered for any matches yet</p>
    <LinkTo @route="my-matches" class="btn btn-accent btn-sm">Find Matches</LinkTo>
  </div>
{{/if}}

{{!-- ═══════ SCORED MATCH HISTORY ═══════ --}}
<h6 class="fw-bold mb-3"><i class="bi bi-trophy text-warning"></i> Scored Match History</h6>

{{#if @model.history.length}}
  <div class="card">
    <div class="card-body p-0 table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Match</th>
            <th>Date</th>
            <th>Round</th>
            <th class="text-center">Bulls Caught</th>
            <th class="text-center">Penalties</th>
            <th class="text-center">Net Score</th>
          </tr>
        </thead>
        <tbody>
          {{#each @model.history as |h|}}
            <tr>
              <td class="fw-semibold">{{h.match_name}}</td>
              <td class="text-muted small">{{h.match_date}}</td>
              <td><span class="badge bg-secondary">{{h.round_name}}</span></td>
              <td class="text-center text-success fw-bold">{{h.bull_caught}}</td>
              <td class="text-center text-danger">{{h.penalties}}</td>
              <td class="text-center fw-bold" style="color:var(--primary);">{{h.net_score}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
{{else}}
  <div class="empty-state py-4">
    <i class="bi bi-trophy" style="font-size:2.5rem;"></i>
    <h6 class="mt-2">No Match History</h6>
    <p class="text-muted small">You haven't participated in any scored matches yet</p>
  </div>
{{/if}}
