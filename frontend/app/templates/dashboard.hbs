{{page-title "Dashboard"}}

{{!-- Welcome banner --}}
<div class="card bg-dark text-white mb-4">
  <div class="card-body d-flex align-items-center justify-content-between py-3">
    <div>
      <h4 class="fw-bold mb-1">Welcome, {{this.auth.user.full_name}}</h4>
      <p class="mb-0 opacity-75">Here's your overview for today</p>
    </div>
    <span class="role-tag {{this.auth.role}}" style="font-size:0.8rem; padding:0.3rem 0.8rem;">{{this.auth.role}}</span>
  </div>
</div>

{{!-- Stats row (admin/registrar/scorer only â€” players/owners don't need table counts) --}}
{{#if this.auth.isAdmin}}
<div class="row g-3 mb-4">
  {{#each-in @model.stats as |key value|}}
    <div class="col-6 col-md-3">
      <div class="card stat-card {{if (eq key 'player') 'accent' (if (eq key 'bull_table') 'green' (if (eq key 'match_table') 'blue' 'saffron'))}}">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <div class="stat-value">{{value}}</div>
            <div class="stat-label">{{key}}</div>
          </div>
        </div>
      </div>
    </div>
  {{/each-in}}
</div>
{{/if}}

{{!-- Role-specific actions --}}
<div class="section-header">
  <h5><i class="bi bi-lightning-fill text-warning"></i> Quick Actions</h5>
</div>

<div class="row g-3 mb-4">
  {{!-- Common --}}
  <div class="col-6 col-md-4 col-lg-3">
    <LinkTo @route="scoreboard" class="text-decoration-none">
      <div class="card action-card">
        <div class="action-icon bg-danger"><i class="bi bi-broadcast"></i></div>
        <h6>Live Scoreboard</h6>
        <p>View live match scores</p>
      </div>
    </LinkTo>
  </div>
  <div class="col-6 col-md-4 col-lg-3">
    <LinkTo @route="leaderboard" class="text-decoration-none">
      <div class="card action-card">
        <div class="action-icon bg-warning"><i class="bi bi-bar-chart-fill"></i></div>
        <h6>Leaderboard</h6>
        <p>Top players &amp; bulls</p>
      </div>
    </LinkTo>
  </div>

  {{!-- Scorer --}}
  {{#if this.auth.isScorer}}
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="match-control" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon bg-success"><i class="bi bi-sliders2"></i></div>
          <h6>Match Control</h6>
          <p>Enter &amp; edit scores</p>
        </div>
      </LinkTo>
    </div>
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="winners" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon" style="background:#6f42c1;"><i class="bi bi-award-fill"></i></div>
          <h6>Winners</h6>
          <p>Declare match winners</p>
        </div>
      </LinkTo>
    </div>
  {{/if}}

  {{!-- Registrar --}}
  {{#if this.auth.isRegistrar}}
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="events" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon bg-primary"><i class="bi bi-calendar-check"></i></div>
          <h6>Events</h6>
          <p>Manage events &amp; batches</p>
        </div>
      </LinkTo>
    </div>
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="registration" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon bg-info"><i class="bi bi-person-plus-fill"></i></div>
          <h6>Registration</h6>
          <p>Approve registrations</p>
        </div>
      </LinkTo>
    </div>
  {{/if}}

  {{!-- Admin --}}
  {{#if this.auth.isAdmin}}
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="tables" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon" style="background:#0d6efd;"><i class="bi bi-database-fill"></i></div>
          <h6>Data Tables</h6>
          <p>Manage master data</p>
        </div>
      </LinkTo>
    </div>
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="users" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon" style="background:#dc3545;"><i class="bi bi-people-fill"></i></div>
          <h6>Users</h6>
          <p>Manage user accounts</p>
        </div>
      </LinkTo>
    </div>
  {{/if}}

  {{!-- Player --}}
  {{#if (eq this.auth.role "player")}}
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="my-profile" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon bg-primary"><i class="bi bi-person-circle"></i></div>
          <h6>My Profile</h6>
          <p>View career stats</p>
        </div>
      </LinkTo>
    </div>
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="my-matches" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon bg-success"><i class="bi bi-flag-fill"></i></div>
          <h6>Join Match</h6>
          <p>Register for events</p>
        </div>
      </LinkTo>
    </div>
  {{/if}}

  {{!-- Owner --}}
  {{#if (eq this.auth.role "owner")}}
    <div class="col-6 col-md-4 col-lg-3">
      <LinkTo @route="my-bulls" class="text-decoration-none">
        <div class="card action-card">
          <div class="action-icon" style="background:#20c997;"><i class="bi bi-shield-fill"></i></div>
          <h6>My Bulls</h6>
          <p>Manage your bulls</p>
        </div>
      </LinkTo>
    </div>
  {{/if}}
</div>
